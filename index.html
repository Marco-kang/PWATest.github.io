<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"
    />
    <title>Document</title>
    <link rel="stylesheet" href="main.css" />
    <link rel="manifest" href="manifest.json" />
  </head>
  <body>
    <h3>Hello PWA</h3>
    <script>
      //检测浏览器是否支持SW
      if (navigator.serviceWorker != null) {
        navigator.serviceWorker.register('./sw.js').then(registartion => {
          console.log('支持sw:', registartion.scope)
        })
      }
      // 「弹出添加到主屏对话框」事件
      window.addEventListener('beforeinstallprompt', event => {
        // 这个 `event.userChoice` 是一个 Promise ，在用户选择后 resolve
        event.userChoice.then(result => {
          console.log(result.outcome)
          // 'accepted': 添加到主屏
          // 'dismissed': 用户不想理你并向你扔了个取消
        })
      })
    </script>
  </body>
</html>
